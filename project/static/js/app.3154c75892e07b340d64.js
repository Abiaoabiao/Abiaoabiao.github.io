webpackJsonp([1],{"/k2H":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),n=a("mvHQ"),i=a.n(n),r=a("Dd8w"),s=a.n(r),o=a("NYxO"),c={props:["tableData"],data:function(){return{temp:[],numList:[],multipleSelection:[]}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){this.$emit("openDia",e,t)},handleDelete:function(e){var t=this;e&&this.$alert("确定删除该用户","",{confirmButtonText:"确定",callback:function(a){"cancel"==a?t.$message({type:"info",message:"正在取消删除"}):(t.tableData.splice(e,1),localStorage.setItem("key",i()(t.tableData)),t.$message({type:"success",message:"删除成功"}))}})},handleDeleteMore:function(){for(var e=this,t=(this.multipleSelection.map(function(t){return e.tableData.indexOf(t)}),0);t<this.multipleSelection.length;t++)this.tableData.splice(t,1),localStorage.setItem("key",i()(this.tableData));this.toggleSelection()}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",type:"index",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"region",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px","margin-left":"10px"}},[a("el-button",{on:{click:e.handleDeleteMore}},[e._v("批量删除")])],1)],1)},staticRenderFns:[]},d=a("VU/8")(c,u,!1,null,null,null).exports,p=a("Wxq9"),m={name:"App",components:{Table:d},created:function(){this.tableData=JSON.parse(localStorage.getItem("key"))||[]},computed:Object(o.b)(["user"]),data:function(){return{rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空",trigger:"blur"},{validator:function(e,t,a){"男"==t||"女"==t?a():a(new Error("性别只能为 男 或 女 "))},trigger:"blur"}],age:[{required:!0,message:"年龄不能为空",trigger:"blur"},{validator:function(e,t,a){t<0||t>120?a(new Error("年龄不能小于0岁，不能大于120岁")):a()},trigger:"blur"}],phone:[{required:!0,message:"号码不能为空",trigger:"blur"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"请输入正确的号码格式",trigger:"blur"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]},index:"",alter:!1,tableData:[],placeholder:"请选择地址",searchKey:"",dialogFormVisible:!1,options:[{value:"440000",label:"广东省",children:[{value:"440100",label:"广州市",children:[{value:"440103",label:"荔湾区"},{value:"440104",label:"越秀区"},{value:"440105",label:"海珠区"},{value:"440113",label:"番禺区"}]}]}],adr:"",selectedOptions:[],addtions:"",formInline:{name:"",sex:"",age:"",phone:""}}},methods:{handleChange:function(e){var t="";this.selectedOptions.map(function(e){return t+=p.CodeToText[e]}),this.addtions=t,this.placeholder=t,console.log(this.addtions)},addData:function(){var e=this;this.$refs.submitForm.validate(function(t){if(!t)return e.$message({message:"信息不正确",type:"warning"});e.alter?(e.$set(e.tableData,e.index,s()({},e.formInline,{region:e.placeholder+e.adr})),localStorage.setItem("key",i()(e.tableData)),e.$store.commit("user/setUserData",e.tableData),e.dialogFormVisible=!1,e.placeholder="请选择地址",e.alter=!1):(e.formInline=s()({},e.formInline,{region:e.addtions+e.adr}),e.tableData.push(e.formInline),e.formInline={},e.adr="",e.selectedOptions=[],localStorage.setItem("key",i()(e.tableData)),e.$store.commit("user/setUserData",e.tableData),e.dialogFormVisible=!1,e.placeholder="请选择地址")})},openDia:function(e,t){console.log(e),this.alter=!0,this.index=e,this.dialogFormVisible=!0,this.formInline=s()({},t),this.placeholder=t.region.slice(0,9),this.adr=t.region.slice(9)},search:function(){var e=this;if(this.searchKey){var t=JSON.parse(localStorage.getItem("key"));this.tableData=t.filter(function(t){return-1!==t.name.indexOf(e.searchKey)}),console.log(this.tableData)}},returnData:function(){this.tableData=JSON.parse(localStorage.getItem("key"))},cancel:function(){this.alter=!1,this.dialogFormVisible=!1,this.formInline={},this.adr="",this.placeholder="请选择地址",this.selectedOptions=[]},repeal:function(){var e=this;console.log(this.user.userData,this.tableData),this.user.userData.length>this.tableData.length?this.$confirm("确定撤销","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.tableData=e.user.userData,localStorage.setItem("key",i()(e.tableData)),e.$message({type:"success",message:"撤销成功!"})}).catch(function(){e.$message({type:"info",message:"已取消撤销"})}):this.$message({type:"info",message:"无法撤销"})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"header"},[a("el-col",{attrs:{span:24}},[a("div",[e._v("用户管理")])])],1),e._v(" "),a("div",{staticClass:"handle"},[a("div",{staticClass:"search"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新建")]),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"按名字搜索"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.search}},[a("i",{staticClass:"el-icon-search"})]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{size:"mini"},on:{click:e.returnData}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"repeal"},[a("el-button",{attrs:{size:"mini"},on:{click:e.repeal}},[e._v("撤销")])],1)]),e._v(" "),a("Table",{attrs:{tableData:e.tableData},on:{openDia:e.openDia}}),e._v(" "),a("el-dialog",{attrs:{title:"新建/编辑用户",width:"550px",visible:e.dialogFormVisible},on:{close:e.cancel,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"submitForm",staticClass:"demo-form-inline",attrs:{rules:e.rules,inline:!0,model:e.formInline,"label-position":"top"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入性别"},model:{value:e.formInline.sex,callback:function(t){e.$set(e.formInline,"sex",t)},expression:"formInline.sex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入性别"},model:{value:e.formInline.age,callback:function(t){e.$set(e.formInline,"age",t)},expression:"formInline.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话号码",prop:"phone","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入电话号码"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-cascader",{attrs:{size:"large",placeholder:e.placeholder,options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),e._v(" "),a("el-input",{staticClass:"adr-input",attrs:{placeholder:"请输入详细地址"},model:{value:e.adr,callback:function(t){e.adr=t},expression:"adr"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v(e._s(this.alter?"确认修改":"添加"))])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,h,!1,function(e){a("/k2H")},"data-v-3fb9e729",null).exports;l.default.use(o.a);var g=new o.a.Store({modules:{user:{namespaced:!0,state:{userData:[]},getters:{},mutations:{setUserData:function(e,t){e.userData=t}},actions:{}}},strict:!0});window.store=g;var b=g,v=a("zL8q"),_=a.n(v);a("tvR6");l.default.config.productionTip=!1,l.default.use(_.a),new l.default({el:"#app",store:b,components:{App:f},template:"<App/>"})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3154c75892e07b340d64.js.map